# Lumma 产品功能详单

## 1. 应用基础架构
- 跨平台 Flutter 应用，支持多语言（中/英），主题切换（明/暗），环境变量自动加载。
- 配置文件统一管理，支持自定义数据目录、同步方式、模型与提示词配置。

## 2. 主界面与导航
- 启动页：自动初始化配置、主题、语言。
- 主页面（MainTabPage）：
  - LOGO、主标题、副标题展示。
  - 主操作按钮：根据日记模式（AI对话/固定问答）跳转到相应日记页面。
  - 次要操作区：
    - 日记列表入口
    - 数据同步入口（支持WebDAV/Obsidian）
    - 设置页入口

## 3. 日记功能
### 3.1 AI对话日记（DiaryChatPage）
- 支持与AI模型（LLM）多轮对话，自动保存历史。
- 支持AI自动生成日记标题、分类、内容分析。
- 支持AI内容流式输出与中断。
- 支持模型切换、请求参数调试、请求内容复制。
- 支持保存为日记文件，自动补全frontmatter。

### 3.2 固定问答日记（DiaryQaPage）
- 支持自定义问答列表，逐题作答生成结构化日记。
- 支持AI内容分析与总结。
- 支持日记历史加载与编辑。
- 支持日记文件的创建、保存、重命名、删除。

### 3.3 日记文件管理
- 日记文件列表（DiaryFileListPage/Widget/Manager）：
  - 支持按日期/文件名排序、筛选。
  - 支持新建、编辑、重命名、删除、选择日记文件。
  - 支持前置元数据（frontmatter）解析与补全。
  - 支持多文件批量操作。

### 3.4 日记内容格式化与解析
- Markdown格式存储，支持多条目、分节、AI分析、分类、时间等结构化信息。
- 支持内容与AI分析分离，支持日总结自动识别与过滤。

## 4. AI模型与提示词管理
- 支持多模型（LLM）配置，支持OpenRouter、DeepSeek等主流API。
- 支持模型激活、切换、编辑、删除、复制、系统级与自定义区分。
- 支持多提示词（Prompt）配置，按类型（对话/总结）管理。
- 支持激活、编辑、删除、重置、复制、系统级与自定义区分。
- 支持多语言提示词内容。

## 5. 同步与数据管理
- 支持Obsidian URI同步与WebDAV远程同步。
- 支持同步配置检测、连接测试、同步进度与结果反馈。
- 支持本地与远程目录选择、权限检测。
- 支持同步模式切换与多平台兼容。

## 6. 设置与个性化
- 设置页（SettingsPage）：
  - 日记模式切换（AI对话/固定问答）
  - 提示词管理
  - 模型管理
  - 问答列表管理
  - 同步配置管理
  - 主题与语言切换
- 支持外观预览、主题实时切换、语言实时切换。

## 7. 工具与扩展
- Markdown渲染组件，支持Mermaid流程图。
- Curl命令生成与curlconverter跳转。
- Yaml编码工具。
- LLM错误弹窗与调试工具。
- 日记frontmatter解析与补全工具。

## 8. 国际化与本地化
- 支持中英文界面与内容切换。
- 支持多语言提示词与AI交互内容。

## 9. 其他
- 统一异常处理与用户反馈。
- 代码结构清晰，易于扩展与维护。
- 支持多平台（Android/iOS/Linux/macOS/Windows/Web）。

---
> 本功能列表基于lib目录下源代码自动推理生成，涵盖所有主要功能与细节，适用于产品文档、测试用例与开发参考。
